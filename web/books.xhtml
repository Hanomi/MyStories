<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Title</title>
</h:head>

<h:body>

    <ui:composition template="/templates/library_template.xhtml">

        <ui:define name="title">
            #{lcl.library_title}
        </ui:define>

        <ui:define name="content">
            <p><strong>
                <h:outputText value="#{lcl.book_count} #{searchController.booksFounded()}" id="books_count"/>
            </strong></p>
            <h:dataTable id="book_list" value="#{searchController.bookListPage}" var="b"
                         columnClasses="col1, col2, col3">
                <h:column>
                    <h:graphicImage value="/image?id=#{b.id}" width="120"/>
                </h:column>
                <h:column>
                    <div>
                        <p><strong>#{b.name}</strong></p>
                        <p>#{lcl.author_name}: #{b.author}</p>
                        <p>#{lcl.page_count}: #{b.pageCount}</p>
                        <p>#{lcl.publisher}: #{b.publisher}</p>
                        <p>#{lcl.publishDate}: #{b.publishDate}</p>
                        <p>#{lcl.isbn}: #{b.isbn}</p>
                        <p>
                            <h:outputLink value="#{request.contextPath}/read" target="_blank">
                                <h:outputText value="#{lcl.read}"/>
                                <f:param name="id" value="#{b.id}"/>
                            </h:outputLink>
                            <h:outputLink value="#{request.contextPath}/download" target="_blank">
                                <h:outputText value="#{lcl.download}"/>
                                <f:param name="id" value="#{b.id}"/>
                                <f:param name="filename" value="#{b.name}"/>
                            </h:outputLink>
                        </p>
                    </div>
                </h:column>
                <h:column>
                    <div class="description">
                        <p><strong>#{lcl.description}:</strong></p>
                        <p>#{b.description}</p>
                    </div>
                </h:column>
            </h:dataTable>
            <div>
                <h:panelGroup id="pager_down">
                    <h:form rendered="#{searchController.showPager()}">
                        <p>#{lcl.pager}:</p>
                        <ui:repeat value="#{searchController.pageNumber()}" var="pageNumber">
                            <h:commandLink value="#{pageNumber}"
                                           styleClass="#{pageNumber == searchController.selectedPage ? 'letter_selected' : 'letter'}">
                                <f:param name="page_number" value="#{pageNumber}"/>
                                <f:ajax onevent="showProgress" event="click"
                                        render="@form :book_list"
                                        listener="#{searchController.selectPage()}"/>
                            </h:commandLink>
                        </ui:repeat>
                    </h:form>
                </h:panelGroup>
            </div>
        </ui:define>

    </ui:composition>

</h:body>

</html>